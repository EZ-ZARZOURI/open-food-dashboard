{% extends 'base.html.twig' %}

{% block body %}
<div class="bg-white shadow-md rounded-lg overflow-hidden border border-gray-200 flex flex-col hover:shadow-xl transition duration-300" data-controller="product-widget">
    <!-- IMAGE -->
    <div class="w-full h-40 overflow-hidden">
    <a href="{{ product.imageUrl ?: 'https://placehold.co/600x600?text=No+Image' }}"
       target="_blank"
       rel="noopener noreferrer">

        <img
            src="{{ product.imageUrl ?: 'https://placehold.co/200x200?text=No+Image' }}"
            alt="{{ product.name }}"
            class="w-full h-full object-cover hover:scale-105 transition"
        />
    </a>
    </div>


    <!-- TITRE ET MARQUE -->
    <div class="p-4 flex-1 flex flex-col justify-between">
        <div>
            <h2 class="text-lg font-bold text-blue-600 truncate">
                {{ product.name ?: 'Nom inconnu' }}
            </h2>
            <p class="text-sm font-semibold text-gray-700 truncate">
                {{ product.brand ?: 'Marque inconnue' }}
            </p>
        </div>

        <!-- DÉTAILS (pliables) -->
        <div class="mt-3 text-sm text-gray-600">
            <button type="button"
                    class="text-blue-500 font-medium mb-2 hover:underline"
                    data-action="click->product-widget#toggleDetails">
                Voir les détails
            </button>


            <div data-product-widget-target="details" class="hidden space-y-1">
                <p><strong>Code :</strong> {{ product.code ?: 'Code inconnu' }}</p>
                <p><strong>Pays :</strong> {{ product.countries ?: 'Pays inconnu' }}</p>
                <p><strong>Catégories :</strong> {{ product.categories ?: 'Catégorie inconnue' }}</p>
            </div>
        </div>

            <!-- BOUTONS EDIT / DELETE -->
        <div class="mt-4 flex justify-end gap-2">
        <!-- Bouton Modifier -->
        <button class="p-2 rounded border border-gray-300 hover:bg-gray-100"
                aria-label="Modifier">
            {{ ux_icon('heroicons:pencil', {
                class: 'w-5 h-5 text-blue-600'
            }) }}
        </button>

        <!-- Bouton Supprimer -->
        <button class="p-2 rounded border border-gray-300 hover:bg-red-100"
                aria-label="Supprimer">
            {{ ux_icon('heroicons:trash', {
                class: 'w-5 h-5 text-red-600'
            }) }}
        </button>
    </div>

    </div>
</div>

{% endblock %}

